# Configuração do RabbitMQ para o sistema Mensura

# Configurações básicas
listeners.tcp.default = 5672
management.tcp.port = 15672

# Configurações de memória
vm_memory_high_watermark.relative = 0.6
vm_memory_high_watermark_paging_ratio = 0.5

# Configurações de disco
disk_free_limit.relative = 2.0

# Configurações de heartbeat
heartbeat = 600

# Configurações de cluster (se necessário)
# cluster_formation.peer_discovery_backend = rabbit_peer_discovery_classic_config
# cluster_formation.classic_config.nodes.1 = rabbit@rabbitmq1
# cluster_formation.classic_config.nodes.2 = rabbit@rabbitmq2

# Configurações de logging
log.console = true
log.console.level = info
log.file = /var/log/rabbitmq/rabbitmq.log
log.file.level = info

# Configurações de plugins
management.load_definitions = /etc/rabbitmq/definitions.json

# Configurações de políticas
# default_policies = [
#   {
#     name = "ha-policy",
#     pattern = ".*",
#     definition = {
#       "ha-mode" = "all"
#     }
#   }
# ]

# Configurações de segurança
# ssl_options.cacertfile = /etc/ssl/certs/ca-cert.pem
# ssl_options.certfile = /etc/ssl/certs/server-cert.pem
# ssl_options.keyfile = /etc/ssl/private/server-key.pem
# ssl_options.verify = verify_peer
# ssl_options.fail_if_no_peer_cert = true

# Configurações de performance
channel_max = 2047
frame_max = 131072
heartbeat = 600

# Configurações de rede
tcp_listen_options.backlog = 128
tcp_listen_options.nodelay = true
tcp_listen_options.keepalive = true
tcp_listen_options.exit_on_close = false

# Configurações de autenticação
auth_backends.1 = internal
auth_backends.2 = http
auth_http.user_path = http://localhost:8080/auth/user
auth_http.vhost_path = http://localhost:8080/auth/vhost
auth_http.resource_path = http://localhost:8080/auth/resource
auth_http.topic_path = http://localhost:8080/auth/topic

# Configurações de limpeza
collect_statistics_interval = 5000
